
**Oracle Transparent Network Substrate (TNS)** — это коммуникационный протокол, который упрощает взаимодействие между базами данных Oracle и приложениями по сети. Он был введен в составе программного обеспечения Oracle Net Services и поддерживает различные сетевые протоколы, такие как IPX/SPX и TCP/IP. TNS стал предпочтительным решением для управления крупными и сложными базами данных в таких отраслях, как здравоохранение, финансы и ритейл. Благодаря встроенным механизмам шифрования TNS обеспечивает безопасность передаваемых данных, что делает его идеальным решением для корпоративных сред.

Со временем TNS был обновлен для поддержки новых технологий, включая IPv6 и SSL/TLS шифрование, что делает его более подходящим для следующих целей:
- Разрешение имен
- Управление подключениями
- Балансировка нагрузки
- Безопасность

TNS также позволяет шифровать данные между клиентом и сервером, обеспечивая дополнительный уровень безопасности поверх TCP/IP. Это помогает защитить архитектуру базы данных от несанкционированного доступа или атак, направленных на компрометацию данных в сетевом трафике. Кроме того, TNS предлагает инструменты для мониторинга и анализа производительности, ведения отчетности об ошибках, управления рабочими нагрузками и обеспечения отказоустойчивости.

**Конфигурация по умолчанию**

Конфигурация Oracle TNS по умолчанию варьируется в зависимости от версии и издания установленного программного обеспечения Oracle. Обычно слушатель TNS по умолчанию прослушивает входящие подключения на порту TCP/1521, но этот порт можно изменить при установке или в файле конфигурации. TNS Listener поддерживает различные сетевые протоколы, включая TCP/IP, UDP, IPX/SPX и AppleTalk, а также может поддерживать несколько сетевых интерфейсов и прослушивать конкретные IP-адреса или все доступные сетевые интерфейсы. 

В Oracle 8i/9i удаленное управление Listener по умолчанию разрешено, в то время как в Oracle 10g/11g — нет. TNS Listener также включает некоторые базовые функции безопасности, такие как принятие подключений только от авторизованных хостов и выполнение базовой аутентификации с использованием комбинации имен хостов, IP-адресов, имен пользователей и паролей. Конфигурационные файлы TNS, такие как `tnsnames.ora` и `listener.ora`, обычно расположены в каталоге `$ORACLE_HOME/network/admin` и содержат информацию о конфигурации экземпляров базы данных Oracle и других сетевых сервисов.

**Файл `tnsnames.ora`** используется клиентским программным обеспечением Oracle Net Services для разрешения имен сервисов в сетевые адреса. Например, простой файл `tnsnames.ora` может выглядеть следующим образом:

```
ORCL =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = 10.129.11.102)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = orcl)
    )
  )
```

**Файл `listener.ora`** — это файл конфигурации на стороне сервера, который определяет свойства и параметры процесса Listener, ответственного за прием входящих запросов клиентов и их перенаправление к соответствующему экземпляру базы данных Oracle:

```
SID_LIST_LISTENER =
  (SID_LIST =
    (SID_DESC =
      (SID_NAME = PDB1)
      (ORACLE_HOME = C:\oracle\product\19.0.0\dbhome_1)
      (GLOBAL_DBNAME = PDB1)
    )
  )
```

Файлы `tnsnames.ora` и `listener.ora` обеспечивают настройку и работу TNS, обеспечивая связь между клиентами и базой данных Oracle. 

**PL/SQL Exclusion List** — это текстовый файл, который создается пользователем и содержит имена пакетов или типов PL/SQL, которые должны быть исключены из выполнения. Файл размещается в каталоге `$ORACLE_HOME/sqldeveloper` и служит черным списком, который нельзя использовать через Oracle Application Server.

**Настройки TNS:**
- `DESCRIPTION`: Описание базы данных и тип подключения.
- `ADDRESS`: Сетевой адрес базы данных (hostname и порт).
- `PROTOCOL`: Сетевой протокол, используемый для связи с сервером.
- `CONNECT_DATA`: Атрибуты подключения, такие как имя службы или SID.
- `SERVICE_NAME`: Имя сервиса, к которому клиент хочет подключиться.
  
**Сканирование и взлом TNS**

Для взаимодействия с TNS Listener и его сканирования используются различные инструменты, такие как `nmap` и `ODAT`. Например, `nmap` может использоваться для брутфорса SID:

```
sudo nmap -p1521 -sV 10.129.204.235 --open --script oracle-sid-brute
```

Также можно использовать ODAT для выполнения всестороннего сканирования:

```
./odat.py all -s 10.129.204.235
```

Если удается получить учетные данные, можно подключиться к базе данных Oracle с помощью `sqlplus`:

```
sqlplus scott/tiger@10.129.204.235/XE
```

Команды SQLplus могут использоваться для дальнейшего изучения базы данных и управления ею. Например, можно извлечь хеши паролей:

```
select name, password from sys.user$;
```