# Термины:

Битовый интервал - величина (обозначена как t) обратная пропускной способности.

# Методы физического кодирования

## NRZ

![[Pasted image 20240910222148.png]]

Рассмотрим NRZ - Non Return to Zero - кодирование при котором значению бита 1 соответствует высокий уровень потенциала, а значению 0 - низкий.
Самая высокочастотная составляющая NRZ возникает при чередовании 0 и 1. Из этого можно определить верхнюю границу частот. То есть пусть длительность битового интервала равна t. Тогда период гармонического сигнала (синусоиды) равен 2t. t же определяется как величина обратная пропускной способности t = 1/C. Отсюда можем найти верхнюю границу частоты: $$f_{в}=\frac{1}{T}=\frac{C}{2}$$
Кроме того, нижняя частота всегда больше нуля и зависит от передачи конкретного сообщения. Т.к. за нее отвечает максимальная последовательность нулей и единиц. Но в пределе она стремится к нулю, поэтому в предельном случае ширина спектра вычисляется как:
$$S = f_{в}-f_{н} = \frac{C}{2}$$
#### Достоинства NRZ:

- Простота и низкая стоимость (т.к. всего 2 уровня потенциала)
- Малая ширина спектра сигнала относительно других методов кодирования: $S=f_{в}=0.5 \cdot C$
#### Недостатки NRZ:

- Отсутствие самосинхронизации, что может привести к рассинхронизации часов приемника и передатчика при передаче длинной последовательности нулей и единиц.
- Невозможность использования при наличии в электрическом канале связи между источником и приемников гальванических развязок.

> [!important] Гальваническая развязка
> Невозможность использования NRZ при наличии гальванических развязок обусловлено их работой. При наличии большого количества единиц или нулей подряд гальваническая развязка сочтет данный ток постоянным и он не будет пропущен.
> В большинстве случаев гальванические развязки выполнены с использованием не пропускающих постоянный ток компонентов - трансформаторов, конденсаторов...

## RZ

![[RZ.png]]

RZ - биполярный импульсный код с возвратом к нулю (Return to Zero). 

> [!info] Биполярность
> В нашем случае рассмотрен биполярный RZ код. Но также есть и униполярный аналог. Все различие заключается в том, что при использовании униполярного кода ноль будет обозначен отсутствием потенциала. Кстати в случае униполярного кода сигнал будет двухуровневым - уровень логического нуля и обычного нуля будут совмещены.

В импульсных кодах данные представлены полным импульсом или его частью - фронтом.
Одним из наиболее популярных импульсных кодов является трехуровневый RZ. В нем единица представлена импульсом одной полярности, а ноль импульсом другой. Каждый из импульсов длится половину битового интервала. В середине битового интервала происходит возврат к нулевому потенциалу.

#### Достоинства RZ:

- Наличие самосинхронизации за счет возврата в середине каждого битового интервала к нулевому потенциалу.
- Отсутствие постоянной составляющей.

#### Недостатки RZ:

- Из-за наличия трех уровней сигнала требуется увеличение мощности передатчика для обеспечения достоверности приема сигналов, что увеличивает стоимость реализации.
- Требуется более широкий спектр частот, так как при передаче повторяющихся нулей или единиц частота будет $f_{в} = \frac{1}{T}=\frac{1}{t}=C$, так как в данном случае $T = t$, а при передаче чередующихся нулей и единиц $f_{н}=\frac{С}{4}$, так как период возрастает от половины битового интервала до 2 битовых интервалов. Таким образом спектр в полтора раза больше, чем в NRZ, $S = f_{в}-f_{н}=0.75 \cdot C$.


## AMI

![[AMI.png]]

Биполярное кодирование с чередующейся инверсией (Bipolar Alternate Mark Inversion) является модификацией RZ. В AMI также 3 уровня потенциала: положительный, нулевой и отрицательный.

#### Достоинства AMI:

- Отсутствует проблема постоянной составляющей, а также возможна синхронизация при передаче длинных последовательностей единиц.
- В общем случае спектр AMI меньше чем спектр RZ, так как при передаче чередующихся единиц период будет равен 2t, а $f_{в}=\frac{C}{2}$, в то время как $f_{н}\to{0}$. В таком случае ширина спектра сигнала будет равна $S<\frac{C}{2}$.
- Присутствует возможность распознавать ошибочные сигналы при нарушении чередования полярности сигналов.

#### Недостатки AMI:

- Наличие трех уровней потенциала требует увеличения мощности передатчика, что увеличивает стоимость.
- В случае длинных последовательностей нулей будет присутствовать постоянная составляющая, которая сдвинет спектр в низкочастотный диапазон.

## NRZI

Потенциальный код с инверсией при единице (Non Return to Zero Inverted).

Достаточно простой код, отличается от AMI тем, что он имеет всего 2 уровня.
В случае логической единицы уровень предыдущего такта меняется на противоположный, а в случае нуля уровень повторяется.

## Манчестерский код

![[manchester.png]]

Манчестерский код.

Для представления логической единицы и нуля используются переходы сигнала:
- Для представления единицы используется переход от высокого уровня сигнала к низкому.
- Для представления нуля - переход от низкого уровня сигнала к высокому.

В случае повторений единицы либо нуля несколько раз подряд в начале битового интервала происходит дополнительный служебный переход сигнала.

#### Достоинства манчестерского кода:

- Самосинхронизация: сигналом для синхронизации может служить изменение сигнала в середине каждого битового интервала.
- Меньший спектр по сравнению с биполярным импульсным кодом в среднем в 1.5 раза. Верхняя граница частот последовательности единиц или нулей равна $f_{в}=С$. Нижняя же граница частот равна $f_{н}=\frac{C}{2}$. Отсюда следует что спектр равен $S=f_{в}-f_{н}=\frac{C}{2}$Гц.
- Всего лишь 2 уровня потенциала.
- Нет постоянной составляющей.

#### Недостаток манчестерского кода:

- Более широкий спектр сигнала чем у NRZ и AMI.


## Дифференциальный манчестерский код

Дифференциальный/разностный манчестерский код применяется в сетях Token Ring, и является разновидностью манчестерского кода, где:
- 0 кодируется изменением уровня потенциала в начале битового интервала (а не в середине).
- 1 кодируется сохранением потенциала.
- В середине каждого битового интервала происходит изменение уровня потенциала.

Особенностью является возможность передачи запрещенных символов "J" и "K" - в которых в середине битового интервала отсутствует изменение уровня потенциала. J и K применяются в качестве начального и конечного разделителя кадров (связано с Token Ring).

Дифференциальный манчестерский код позволяет корректно декодировать сигнал даже в случае ошибочного инвертирования сигнала.


## Код трехуровневой передачи MLT-3

В методе кодирования трехуровневой передачи MLT-3 (Multi Level Transmission-3) двоичной единице соответствует переход на границе битового интервала последовательно с одного уровня на другой, при передаче же нуля сигнал не меняется. Максимальная частота сигнала достигается при передаче длинной последовательности единиц.

#### Недостатки MLT-3:

- Отсутствие какой-либо самосинхронизации.
- Наличие трех уровней сигнала.
- Наличие в сигнале постоянной составляющей при передаче длинной последовательности нулей.

## Пятиуровневый код PAM-5

В пятиуровневом коде PAM-5 используется 5 уровней сигнала, где 4 уровня кодируют 2 бита данных: 00, 01, 10, 11. Таким образом, в одном битовом интервале передаются 2 бита. Пятый (средний) уровень был добавлен для создания избыточности кода (исправление ошибок).

#### Главное достоинство PAM-5 

- Состоит в том, что при одной и той же скорости модуляции данные передаются в 2 раза быстрее по сравнению AMI или NRZI.

#### Недостатки PAM-5

- Наличие постоянной составляющей в сигнале при передаче длинных последовательностей одинаковых пар бит.
- Наличие 5 уровней требует большей мощности передатчика.

# Логическое кодирование

Используется для улучшения кодов AMI, NRZI или MLT-3 за счет ликвидации длинных последовательностей единиц или нулей, приводящих к постоянному потенциалу.

К нему относятся избыточный код и скремблирование.

## Избыточное кодирование

При избыточном кодировании исходный код разбивается на последовательности фиксированной длины, которые затем заменяются новыми последовательностями содержащими больше бит чем исходная.

Различают методы 4B/5B, 5B/6B, 8B/10B, 64B/66B - B означает бинарный.

4B/5B - в исходной последовательности 4 бита, в результирующей 5.

Вследствие избыточности количества результирующих кодов есть запрещенные коды. Их всего $2^5-2^4=16$ штук.

Среди результирующих кодов отобраны 16 таких, что максимально возможное количество единиц в сообщении 8.

Пример таблицы кодов:

![[Pasted image 20240911031823.png]]

#### Достоинства избыточного кодирования:

- Появляется свойство самосинхронизации, из-за исчезновения длинных последовательностей нулей и единиц (максимум 8, а символов в двух подряд идущих  последовательностях 10).
- Сужается спектр сигнала из-за отсутствия постоянной составляющей.
- Появляется возможность обнаружения ошибок за счет наличия запрещенных символов.
- Простая реализация.

#### Недостатки избыточного кодирования:

- Уменьшается полезная пропускная способность канала.
- Возникают дополнительные временные затраты на реализацию логического кодирования.

Основным минусом является появление лишнего проверочного бита. Таким образом при 4B/5B пропускная способность падает относительно номинальной на 20%.

При рассмотрении 6B/8B повышается вероятность обнаружения ошибок, так как процент запрещенных кодов возрастает.

## Скремблирование

Скремблирование - преобразование исходного двоичного кода по заданному алгоритму, позволяющему исключить или, по крайней мере уменьшить длинные последовательности нулей или единиц.

Примером алгоритма скремблирования является:

$B_{i}=A_{i}\oplus B_{i-3}\oplus B_{i-5},\quad i \in 1,2\dots$
$B_{1}=A_{1}$
$B_{2}=A_{2}$
$B_{3}=A_{3}$
$B_{4}=A_{4}\oplus B_{1}$
$\dots$
